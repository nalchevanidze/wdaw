(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{8363:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/player",function(){return n(4207)}])},4207:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var r=n(1085),o=n(4041),a=function(e,t){var n=e.radius,r=e.center,o=t*Math.PI/180,a=r.x+n*Math.cos(o),u=r.y+n*Math.sin(o);return a.toFixed(2)+" "+u.toFixed(2)},u=function(e,t,n){var r=t.start,o=t.end;void 0===n&&(n=!0);var u=e.radius,i=a(e,r),c=a(e,o),s=Math.floor(Math.abs(o-r)/180)%2,l=Number(r-o<0),f=n?[s,l]:[1-s,1-l];return"".concat(i," A").concat(u," ").concat(u," 0 ").concat(f.join(" ")," ").concat(c)},i=function(e){return(360+e)%360},c=function(e){var t=e.start;return s({start:e.end,end:t})},s=function(e){var t=e.start,n=e.end,r=i(t),o=i(n);return{start:r,end:o>r?o:o+360}},l=function(e,t,n){var r=t.start,o=t.end,a=r+(o-r)*e;return n?{start:r,end:a}:{start:a,end:o}},f=function(e,t){var n=e.center,r=e.radius,o=r[0],a=r[1],i=t.start,s=t.end,l=c(t);return"M ".concat(d(e,i)," ").concat(u({center:n,radius:o},t)," L ").concat(d(e,s)," ").concat(u({center:n,radius:a},l,!1))},d=function(e,t){var n=e.center,r=e.radius,o=r[0],u=r[1];return a({center:n,radius:o},t)+" "+a({center:n,radius:u},t)},h=function(e,t){var n=t.x,r=t.y;return 360-i(180*Math.atan2(n-e.x,r-e.y)/Math.PI-90)},p=function(e,t,n){var r=n.start,o=n.end,a=h(t,e)-r;return(a<0?a+360:a)/(o-r)},v=function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}},m=function(e,t){var n=v(e,t);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))},y=function(e,t,n){var r=t.start,o=(t.end-r)/(e.length-1);return Array.from(e).map(function(e,t){return n(e,r+t*o)}).join("")+" "},w=function(e,t,n){var r=t.start,o=(t.end-r)/(e.length-1);return e.map(function(e,t){return n(e,r+t*o)})},g=function(e,t,n){var r=t.center,o=t.radius,i=o[0],s=o[1];return"M "+y(e,n,function(e,t){return" "+a({center:r,radius:Math.max(i,i+e/256*(s-i))},t)})+" "+u({center:r,radius:i},c(n),!1)+"Z"},E=function(e,t,n){var r=t.center,o=t.radius,a=o[0],u=(o[1]-a)/128;return y(e,n,function(e,t){return" M "+d({center:r,radius:[a,a+u*e]},t)})},x=function(e,t,n,r){var o=t.center,u=t.radius;return w(e,r,function(e,t){return a({center:o,radius:u+e*n},t)})},b=function(e,t){var n=t.center,r=t.radius,o=r[0],a=r[1],u=t.sector;if(e.length<2)return"";var i=(a-o)*.9,c={center:n,radius:(a+o)/2},s=x(e,c,-i,u).reverse().join(" "),l=x(e,c,i,u).join(" ");return"M ".concat(s,"  ").concat(l,"z")},S={},M=function(e){var t=o.useState([]),n=t[0],r=t[1];return o.useEffect(function(){S[e]?r(S[e]):fetch(e).then(function(e){return e.json()}).then(function(t){S[e]=t,r(t)})},[e]),n};let A=function(e){var t=e.src,n=e.annulusSector;return o.createElement("path",{d:b(M(t),n),fillOpacity:.8})};var O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},k=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let C=function(e){var t=e.annulus,n=e.sector,r=k(e,["annulus","sector"]);return o.createElement("path",O({},r,{d:f(t,n)}))},F=function(e){var t=e.annulus,n=e.sector;return o.createElement("path",{d:"M "+d(t,n.start),stroke:"#FFC107"})},j=function(e){var t=e.annulus,n=e.fr,r=e.spec,a=e.sector,u=e.sector2;return o.createElement("g",null,o.createElement("path",{d:g(r,t,u),fillOpacity:.6,fill:"#777",fillRule:"evenodd"}),o.createElement("path",{d:E(n,t,a),stroke:"#DDD",strokeWidth:.4}))};var P={paused:"M 115 97 l 0 10 8 -5Z",play:"M 115 97 v 10 m7 -10 v 10",stop:""},q="#777",T=function(e){var t=e.toggle,n=e.annulus,r=e.mode,a=e.time;return o.createElement("g",{onClick:t,fill:q,style:{cursor:"pointer"}},o.createElement("path",{d:P[r],strokeLinecap:"round",strokeLinejoin:"round",fillOpacity:"0",strokeWidth:"2px",stroke:q}),o.createElement("text",{x:n.center.x-6,y:n.center.y+8,fontSize:"18px",textAnchor:"middle",fontFamily:"sans-serif"},Math.floor(a/60)+":"+("0"+Math.floor(a)%60).slice(-2)),o.createElement("circle",{cx:n.center.x,cy:n.center.y,r:n.radius[0],opacity:0}))};let _=function(e){var t=e.innerAnnulus,n=e.outerAnnulus,r=e.stageSector,a=e.toggle,u=e.state,i=u.pro,c=u.time,s=u.mode,f=u.freq,d=u.spec,h=l(i,r,!1);return o.createElement("g",null,o.createElement(j,{fr:f,spec:d,annulus:n,sector:r,sector2:h}),o.createElement(C,{annulus:t,sector:h,fill:"#FFF",fillOpacity:.8}),o.createElement(F,{annulus:t,sector:h}),o.createElement(T,{toggle:a,annulus:t,mode:s,time:c}))};var B=n(6721),N=function(e){var t=e.onChange,n=e.annulus,r=e.levelSector,a=e.stageSector,u=(0,B.wu)(),i=o.useState(!1),c=i[0],s=i[1],l=o.useState(.5),f=l[0],d=l[1],h=n.radius,p=h[0],v=h[1],y=n.center,w=function(){return s(!1)},g=function(e){if(c){var n=Math.min(.98,Math.max(.05,(m(u(e),y)-p)/(v-p)));d(n),t(Math.pow(n,2))}};o.useEffect(function(){return document.addEventListener("mouseup",w,!1),function(){return document.removeEventListener("mouseup",w,!1)}});var E={center:y,radius:[p+(v-p)*f,p]};return o.createElement("g",{fill:"#BBB",stroke:"#BBB",strokeWidth:.5,onMouseDown:function(e){s(!0),g(e)},onMouseMove:g},o.createElement(C,{annulus:E,sector:r,fillOpacity:.1,stroke:"#CCC"}),o.createElement(C,{annulus:E,sector:a,fillOpacity:.4}),o.createElement(C,{annulus:n,sector:r,fill:"black",fillOpacity:0}))},D=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(u,i)}c((r=r.apply(e,t||[])).next())})},L=function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return u.next=i(0),u.throw=i(1),u.return=i(2),"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(i){return function(c){return function(i){if(n)throw TypeError("Generator is already executing.");for(;u&&(u=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},U=function(e,t){var n=this;this.render=function(){n.analyser&&(n.analyser.getByteFrequencyData(n.spec),n.analyser.getByteTimeDomainData(n.freq))},this.analyser=e.createAnalyser(),t.connect(this.analyser),this.freq=new Uint8Array(200),this.spec=new Uint8Array(400)},G={pro:0,time:0,mode:"stop",freq:new Uint8Array(40),spec:new Uint8Array(40)},I=function(){var e=this;this.allowed=!1,this.mode="stop",this.setGain=function(){},this.src="",this.waveForm={freq:new Uint8Array(200),spec:new Uint8Array(400),render:function(){}},this.allowAudioContext=function(){e.allowed=!0,e.audio=new Audio,e.audio.crossOrigin="anonymous";var t=new AudioContext,n=t.createMediaElementSource(e.audio),r=t.createGain();n.connect(r),r.connect(t.destination),e.setGain=function(e){return r.gain.setValueAtTime(e,0)},e.waveForm=new U(t,n),e.setVolume(.1)},this.setSrc=function(t){e.src!==t&&(e.src=t,e.audio&&(e.audio.src=t+".mp3"))},this.loadSource=function(){return new Promise(function(t){e.audio&&(e.audio.src=e.src+".mp3",e.audio.addEventListener("canplaythrough",t,!0))})},this.loadAudio=function(){return D(e,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:if(this.allowed)return[2];return this.allowAudioContext(),[4,this.loadSource()];case 1:return e.sent(),[2]}})})},this.play=function(){return D(e,void 0,void 0,function(){var e;return L(this,function(t){switch(t.label){case 0:return[4,this.loadAudio()];case 1:return t.sent(),this.mode="play",null===(e=this.audio)||void 0===e||e.play(),[2]}})})},this.generateState=function(){var t,n,r,o,a=e.mode,u=null!==(n=null===(t=e.audio)||void 0===t?void 0:t.currentTime)&&void 0!==n?n:0,i=u/(null!==(o=null===(r=e.audio)||void 0===r?void 0:r.duration)&&void 0!==o?o:1);return{time:u,pro:isNaN(i)?0:i,mode:a,freq:e.waveForm.freq,spec:e.waveForm.spec}},this.playNew=function(t){e.setSrc(t),e.allowed&&e.play()},this.setVolume=function(t){e.allowed&&e.setGain(t)},this.playAt=function(t){return D(e,void 0,void 0,function(){var e;return L(this,function(n){switch(n.label){case 0:return[4,this.loadAudio()];case 1:return n.sent(),e=this.audio?this.audio.duration*t:1,this.audio&&(this.audio.currentTime=e),[2,{pro:t,time:e,mode:this.mode,freq:this.waveForm.freq,spec:this.waveForm.spec}]}})})},this.getState=function(){return e.allowed?("play"===e.mode&&e.waveForm.render(),e.generateState()):G},this.pause=function(){e.mode="paused",e.allowed&&e.audio&&e.audio.pause()},this.stop=function(){e.mode="stop",e.allowed&&e.audio&&(e.audio.pause(),e.audio.currentTime=0)},this.toggle=function(){"play"==e.mode?e.pause():e.play()}};let V=function(e){var t=e.annulus,n=e.sector,r=e.onClick,a=(0,B.wu)();return o.createElement(C,{annulus:t,sector:n,onClick:function(e){return r(p(a(e),t.center,n))},fillOpacity:0})},z=function(e){var t=e.observable,n=e.children,r=o.useState(void 0),a=r[0],u=r[1],i=o.useRef(0),c=function(){u(t()),i.current=requestAnimationFrame(c)};return o.useEffect(function(){return c(),function(){return cancelAnimationFrame(i.current)}},[]),a?n(a):null};var R={x:100,y:100};let W=function(e){var t=e.radius,n=void 0===t?[50,85,95]:t,r=n[0],a=n[1],u=n[2],i=e.levelSector,c=e.stageSector,s=void 0===c?{start:60,end:300}:c,l=e.src,f=e.width,d=e.height,h=o.useState(function(){return new I})[0];o.useEffect(function(){return h.playNew(l)},[l]),o.useEffect(function(){return h.stop},[]);var p={center:R,radius:[r,a]};return o.createElement(B.BS,{width:null!=f?f:200,height:null!=d?d:200},o.createElement(A,{annulusSector:{center:R,radius:[r,a],sector:s},src:l+".json"}),o.createElement(z,{observable:h.getState},function(e){return o.createElement(_,{stageSector:s,innerAnnulus:p,outerAnnulus:{center:R,radius:[a,u]},state:e,toggle:h.toggle,src:l})}),o.createElement(N,{annulus:p,onChange:h.setVolume,stageSector:s,levelSector:void 0===i?{start:315,end:360}:i}),o.createElement(V,{annulus:p,sector:s,onClick:h.playAt}))};function X(){return(0,r.jsx)(W,{width:500,height:500,src:"https://nalchevanidze.com/assets/audio/david-alpha-black-hole"})}},6721:(e,t,n)=>{"use strict";n.d(t,{BS:()=>c,UT:()=>a,wu:()=>i});var r=n(4041),o=r.createContext({toPoint:function(){return{x:0,y:0}},width:0,height:0,left:0,top:0}),a=function(){return r.useContext(o)},u=function(){return{x:0,y:0}},i=function(){return r.useContext(o).toPoint},c=function(e){var t,n=e.width,a=e.height,i=e.style,c=e.children,s=e.paddingLeft,l=void 0===s?0:s,f=e.paddingTop,d=void 0===f?0:f,h=e.zoom,p=void 0===h?1:h,v=r.useState(!1)[1],m=r.useRef(null);r.useEffect(function(){return v(!0)},[]);var y=n+l,w=d+a;return r.createElement("svg",{width:y*p,height:w*p,style:i,ref:m,viewBox:[-l,-d,y,w].join(" ")},r.createElement(o.Provider,{value:{left:l,top:d,width:n,height:a,toPoint:m.current?(t=m.current,function(e){var n,r=e.clientX,o=e.clientY,a=t.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(null===(n=t.getScreenCTM())||void 0===n?void 0:n.inverse())}):u}},c))}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(8363)),_N_E=e.O()}]);